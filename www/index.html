<!DOCTYPE html>
<html>
    <head>
      <title>Stop Motion</title>
      <meta charset="utf-8">
        <link rel="stylesheet" href="css/index.css" />
        <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/camera.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/jquery-1.11.1.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/jquery.galleriffic.js"></script>
        <script type="text/javascript" charset="utf-8" src="js/jquery.opacityrollover.js"></script>
        <style>
         ul.thumbs {
           position: relative;
           float: left;
           margin: 0;
           padding: 0;
         }
         ul.thumbs li {
           float: left;
           padding: 0;
           margin: 2px;
           list-style: none;
         }
         ul.thumbs img {
           width: 64px;
           height: 48px;
         }
         div.slideshow img {
           position: relative;
           clear: both;
           float: left;
           width: 320px;
           height: 240px;
         }
        </style>
    </head>
    <body class="app">
        <header class="header">
            <h1>Stop Motion</h1>
        </header>
        <div class="content">
          <div class="result-area">
            <div id="thumbs" class="navigation">
              <a class="pageLink prev" style="visibility: hidden;" href="#" title="Previous Page"></a>
              
              <ul id="thumbnails" class="thumbs noscript">
                <li>
                  <a class="thumb" name="leaf" href="img/3.jpg">
                    <img src="img/3.jpg" />
                  </a>
                </li>

                <li>
                  <a class="thumb" name="drop" href="img/3.jpg">
                    <img src="img/3.jpg" />
                  </a>
                </li>

                <li>
                  <a class="thumb" name="bigleaf" href="img/2.jpg">
                    <img src="img/2.jpg" />
                  </a>
                </li>

                <li>
                  <a class="thumb" name="lizard" href="img/2.jpg">
                    <img src="img/2.jpg" />
                  </a>
                </li>

                <li>
                  <a class="thumb" href="img/1.jpg">
                    <img src="img/1.jpg" />
                  </a>
                </li>

                <li>
                  <a class="thumb" href="img/1.jpg">
                    <img src="img/1.jpg" />
                  </a>
                </li>

                <!-- Change this to fin -->
                <li>
                  <a class="thumb" href="img/1.jpg">
                    <img src="img/1.jpg" />
                  </a>
                </li>
              </ul>
            </div>
          </div>
          <div class="content">
            <div class="slideshow-container">
              <div id="controls" class="controls"></div>
              <div id="loading" class="loader"></div>
              <div id="slideshow" class="slideshow"></div>
            </div>
            <div id="caption" class="caption-container">
              <div class="photo-index"></div>
            </div>
          </div>
          <div class="action-area">
            <button class="button dh" id="capturePhotoButton">Add Frame</button>
          </div>
          <script type="text/javascript">
           document.addEventListener("deviceready", onDeviceReady, false);

           function generateUUID(){
             var d = new Date().getTime();
             var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
               var r = (d + Math.random()*16)%16 | 0;
               d = Math.floor(d/16);
               return (c=='x' ? r : (r&0x7|0x8)).toString(16);
             });
             return uuid;
           };

           function id(element) {
             return document.getElementById(element);
           }

           function onDeviceReady() {
                            // We only want these styles applied when javascript is enabled
             $('div.content').css('display', 'block');

             // Initially set opacity on thumbs and add
             // additional styling for hover effect on thumbs
             var onMouseOutOpacity = 0.67;
               $('#thumbs ul.thumbs li, div.navigation a.pageLink').opacityrollover({
               mouseOutOpacity:   onMouseOutOpacity,
               mouseOverOpacity:  1.0,
               fadeSpeed:         'fast',
               exemptionSelector: '.selected'
             });

             // Initialize Advanced Galleriffic Gallery
             var gallery = $('#thumbs').galleriffic({
               delay:                     250,
               numThumbs:                 7,
               preloadAhead:              10,
               enableTopPager:            false,
               enableBottomPager:         false,
               imageContainerSel:         '#slideshow',
               controlsContainerSel:      '#controls',
               captionContainerSel:       '#caption',
               loadingContainerSel:       '#loading',
               renderSSControls:          true,
               renderNavControls:         true,
               playLinkText:              'Play',
               pauseLinkText:             'Pause',
               prevLinkText:              '&lsaquo; Previous Frame',
               nextLinkText:              'Next Frame &rsaquo;',
               nextPageLinkText:          'Next &rsaquo;',
               prevPageLinkText:          '&lsaquo; Prev',
               enableHistory:             false,
               autoStart:                 false,
               syncTransitions:           true,
               defaultTransitionDuration: 50,
               onSlideChange:             function(prevIndex, nextIndex) {
                 // 'this' refers to the gallery, which is an extension of $('#thumbs')
                 this.find('ul.thumbs').children()
                     .eq(prevIndex).fadeTo('fast', onMouseOutOpacity).end()
                     .eq(nextIndex).fadeTo('fast', 1.0);

                 // Update the photo index display
                 this.$captionContainer.find('div.photo-index')
                                       .html('Frame '+ (nextIndex+1) +' of '+ this.data.length);
               },
               onPageTransitionOut:       function(callback) {
                 this.fadeTo('fast', 0.0, callback);
               },
               onPageTransitionIn:        function() {
                 var prevPageLink = this.find('a.prev').css('visibility', 'hidden');
                 var nextPageLink = this.find('a.next').css('visibility', 'hidden');

                 // Show appropriate next / prev page links
                 if (this.displayedPage > 0)
                 prevPageLink.css('visibility', 'visible');

                 var lastPage = this.getNumPages() - 1;
                 if (this.displayedPage < lastPage)
                 nextPageLink.css('visibility', 'visible');

                 this.fadeTo('fast', 1.0);
               }
             });

             /**************** Event handlers for custom next / prev page links **********************/

             gallery.find('a.prev').click(function(e) {
               gallery.previousPage();
               e.preventDefault();
             });

             gallery.find('a.next').click(function(e) {
               gallery.nextPage();
               e.preventDefault();
             });

             cameraApp = new cameraApp();
             cameraApp.gallery(gallery);
             cameraApp.run();
           }
          </script>
        </div>
    </body>
</html>
